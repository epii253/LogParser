# Анализатор LogParser — моя проба C++

Этот небольшой проект — моя собственная идея и экспериментальная проба возможностей C++: реализовать утилиту для анализа логов  (access.log), способную работать с большими файлами, не завися по памяти от их объёма. Я спроектировал и реализовал всё «с нуля», используя только стандартную библиотеку C++.

## Что умеет утилита

1. **Поиск ошибок 5XX**
   - Извлекает все запросы, завершившиеся кодами `5xx`, и записывает их в выходной файл.
2. **Анализ «горячего» окна**
   - Находит период времени заданной длины (окно), в который поступило максимальное число запросов.

Все операции выполняются без хранения всего лога в памяти: файл читается и обрабатывается строчка за строчкой.

## Параметры командной строки

Утилита `AnalyzeLog` поддерживает следующие опции:

| Короткий | Длинный         | По умолчанию           | Описание                                                                          |
| -------- | --------------- | ---------------------- | --------------------------------------------------------------------------------- |
| `-o`     | `--output=path` | —                      | Выводить строчки с ошибками в файл `path`                                         |
| `-p`     | `--print`       | —                      | Дополнительный вывод ошибок в консоль                                             |
| `-s n`   | `--stats=n`     | `10`                   | Показать топ n самых частых запросов, завершившихся ошибками `5xx`                |
| `-w t`   | `--window=t`    | `0`                    | Длина окна в секундах для подсчёта максимального трафика (если `t=0`, не считать) |
| `-f t0`  | `--from=t0`     | время первой записи    | Начало диапазона анализа (timestamp UNIX)                                         |
| `-e t1`  | `--to=t1`       | время последней записи | Конец диапазона (включительно)                                                    |

**Синтаксис**:

```
AnalyzeLog [OPTIONS] access.log
```

## Формат входного файла

Каждая строка лога соответствует одному HTTP‑запросу:

```
<IP> - - [DD/Mon/YYYY:HH:MM:SS ±ZZZZ] "<метод> <URL> HTTP/x.x" <status> <bytes>
```

Например:

```
198.112.92.15 - - [03/Jul/2024:10:50:02 -0400] "GET /shuttle/countdown/HTTP/1.0" 200 3985
198.112.92.15 - - [03/Jul/2024:10:50:04 -0400] "GET /shuttle/nosuchpath/HTTP/1.0" 404 144
```

Из каждой строки извлекаются:

- IP адрес клиента
- Временная метка
- Запрос (метод + URL)
- Код ответа
- Передано байт

## Примеры запуска

```bash
# Записать все 5xx‑запросы в result.txt
AnalyzeLog access.log --output=result.txt

# Вывести в stdout и в файл, плюс топ 5 ошибок
AnalyzeLog access.log -o result.txt --print --stats 5

# Окно 60 секунд, диапазон по time‑stamp
AnalyzeLog --stats=2 --window=60 --from=805821284 --to=807117284 access.log

# Только топ 2 ошибок, сокращённый синтаксис
AnalyzeLog -s 2 access.log
```

## Сборка и запуск

```bash
mkdir build && cd build
cmake ..
cmake --build .
./AnalyzeLog [OPTIONS] path/to/access.log
```

## Примечания

- Нет сторонних библиотек — только STL и базовый ввод/вывод.
- Пакетная обработка строк без накопления всего файла в памяти.
- Основная цель проекта — отработать современные приёмы C++.  
- Также была опробована система сброки CMake.
  Проект — моя личная проба C++ как языка.
